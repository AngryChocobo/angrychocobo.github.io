<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    æ·±å…¥å­¦ä¹ Reactç”Ÿå‘½å‘¨æœŸå‡½æ•° | è€æ¡”çš„å°ç«™ï¼ˆæ‚„å’ªå’ª
</title>
<link rel="shortcut icon" href="https://angrychocobo.github.io//favicon.ico?v=1589186819654">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://angrychocobo.github.io//styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://angrychocobo.github.io//media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://angrychocobo.github.io/">
                <img class="avatar" src="https://angrychocobo.github.io//images/avatar.png?v=1589186819654" alt="">
            </a>
            <div class="site-title">
                <h1>
                    è€æ¡”çš„å°ç«™ï¼ˆæ‚„å’ªå’ª
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            æ·±å…¥å­¦ä¹ Reactç”Ÿå‘½å‘¨æœŸå‡½æ•°
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-10-28</time>
                            
                        </div>
                        
                                <div class="post-content">
                                    <p>å·¥ä½œä¸­ç®€å•ä½¿ç”¨äº†ç”Ÿå‘½å‘¨æœŸå‡½æ•°å·²ç»æ— æ³•æ»¡è¶³æˆ‘äº†ã€‚æƒ³è¦æ·±å…¥åœ°äº†è§£ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå¹¶äº†è§£åœ¨ç‰ˆæœ¬å‡çº§çš„å˜åŒ–åŸå› ...</p>
<h2 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h2>
<p>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š Mountingã€Updatingã€Unmounting</p>
<h3 id="mountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°">Mountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<ul>
<li>constructor(props)</li>
<li>(static)getÂ­DerivedÂ­StateÂ­FromÂ­Props(props, state)</li>
<li>render()</li>
<li>componentDidMount()</li>
<li><s>UNSAFE_componentWillMount()</s></li>
</ul>
<h3 id="updatingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°">Updatingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<ul>
<li>(static)getDerivedStateFromProps(props, state)</li>
<li>shouldComponentUpdate(nextProps, nextState)</li>
<li>render()</li>
<li>getSnapshotBeforeUpdate(prevProps, prevState)</li>
<li>componentDidUpdate(prevProps, prevState, snapshot)</li>
<li><s>UNSAFE_componentWillUpdate()</s></li>
<li><s>UNSAFE_componentWillReceiveProps(nextProps, nextState)</s></li>
</ul>
<h3 id="unmountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°">Unmountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<ul>
<li>componentWillUnmount()</li>
</ul>
<h3 id="error-handling">Error Handling</h3>
<ul>
<li>(static)getDerivedStateFromError()</li>
<li>componentDidCatch()</li>
</ul>
<h2 id="ç»†èŠ‚">ç»†èŠ‚</h2>
<h3 id="constructorprops">constructor(props)</h3>
<ul>
<li>å¦‚æœä½ ä¸éœ€è¦å±€éƒ¨stateæˆ–è€…ç»‘å®šå‡½æ•°ï¼Œä¸éœ€è¦å®ç°ï¼ˆimplementï¼‰å®ƒ</li>
<li>åº”è¯¥é¦–å…ˆsuper(props)ï¼Œå¦åˆ™this.propså°†ä¸ºundefinedï¼Œå¯¼è‡´bugï¼ˆè°ƒç”¨äº†superåï¼Œå¦‚æœæ²¡æœ‰propsï¼Œthis.propsä¸º{} ï¼‰</li>
<li>ä¸åº”è¯¥åœ¨è¿™é‡ŒsetStateï¼ˆReactV16.11æµ‹è¯•ï¼Œè¿™æ ·åšä¼šæŠ¥é”™ï¼Œå¹¶ä¸”å¹¶ä¸ä¼šç”Ÿæ•ˆï¼‰</li>
<li><strong>Avoid copying props into state! Only use this pattern if you intentionally want to ignore prop updates.</strong> ä¸è¦ç”¨propsåˆå§‹åŒ–stateï¼Œé™¤éä½ ç‰¹æ„æƒ³è¦å¿½ç•¥propsçš„æ›´æ–°</li>
</ul>
<h3 id="render">render()</h3>
<ul>
<li>åœ¨shouldComponentUpdate()è¿”å›falseæ—¶ä¸ä¼šæ‰§è¡Œ</li>
</ul>
<h3 id="åœ¨shouldcomponentupdatenextprops-nextstate">åœ¨shouldComponentUpdate(nextProps, nextState)</h3>
<ul>
<li>ğŸ¤”ï¸åœ¨åˆå§‹åŒ–å’Œè°ƒç”¨forceState()æ—¶ä¸ä¼šè¢«è°ƒç”¨</li>
<li>ä¸è¦ä¾èµ–å®ƒæ¥â€œé˜»æ­¢â€æ¸²æŸ“ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´Bugã€‚è€ƒè™‘ä½¿ç”¨å†…ç½®çš„PureComponentï¼Œè€Œä¸æ˜¯æ‰‹å·¥ç¼–å†™shouldComponentUpdate()ã€‚PureComponentå¯¹propså’Œstateè¿›è¡Œäº†æµ…å±‚æ¯”è¾ƒï¼Œå‡å°‘äº†æ‚¨è·³è¿‡å¿…è¦æ›´æ–°çš„å¯èƒ½æ€§</li>
<li><strong>è¿”å›falseä¸ä¼šé˜»æ­¢å­ç»„ä»¶ç”±äºä»–ä»¬çš„stateæ”¹å˜é‡æ–°render</strong>(Note that returning false does not prevent child components from re-rendering when their state changes.)</li>
<li>åœ¨è¿™é‡Œè¿›è¡Œæ·±å±‚æ¬¡çš„æ£€æŸ¥å¦‚JSON.stringify()æ˜¯å¾ˆæµªè´¹æ€§èƒ½çš„</li>
<li>å½“å‰ï¼Œå¦‚æœshouldComponentUpdate()è¿”å›falseï¼Œåˆ™ä¸ä¼šè°ƒç”¨unsafe_ComponentWillUpdate()ã€render()å’ŒComponentDidUpdate()ã€‚<br>
åœ¨å°†æ¥ï¼ŒReactå¯èƒ½ä¼šå°†shouldComponentUpdate()è§†ä¸ºæç¤ºè€Œä¸æ˜¯ä¸¥æ ¼çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”è¿”å›falseä»ç„¶å¯èƒ½å¯¼è‡´é‡æ–°å‘ˆç°ç»„ä»¶ã€‚ (why ???)</li>
</ul>
<blockquote>
<p>ä¸è¿”å›å€¼ï¼Œä»¥åŠè¿”å›nullç­‰å€¼ä¼šå¦‚ä½•ï¼Ÿ<br>
ç­”ï¼šä¸è¿”å›å€¼ä¼šæŠ¥é”™æç¤º: shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false. è¿”å›nullè¢«è®¤ä¸ºæ˜¯false<br>
ä¸ºä»€ä¹ˆä»è¾“å‡ºçœ‹ï¼ŒnextStateå·²ç»è¢«æ”¹å˜äº†ï¼Ÿ<br>
ç­”ï¼šæ˜¯çš„ã€‚setStateä¸€å®šä¼šæ”¹å˜stateï¼Œä½†æ˜¯ä¸ä¸€å®šå¼•èµ·é‡æ–°renderï¼Œè¿™é‡Œè¦æ³¨æ„shouldComponentUpdateå¹¶ä¸æ˜¯çœŸçš„é˜»æ­¢äº†setStateï¼ˆæˆ‘ä¹‹å‰ç†è§£é”™è¯¯ï¼‰</p>
</blockquote>
<h3 id="componentdidmount">componentDidMount()</h3>
<ul>
<li>åœ¨è¿™é‡Œç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºæ˜¯æ¯”è¾ƒå¥½çš„</li>
<li>åœ¨è¿™é‡Œè®¿é—®æ¥å£ä¹Ÿå¾ˆåˆé€‚</li>
</ul>
<h3 id="getsnapshotbeforeupdateprevprops-prevstate">getSnapshotBeforeUpdate(prevProps, prevState)</h3>
<ul>
<li>ä»»ä½•è¿”å›å€¼éƒ½ä¼šè¢«ä¼ é€’ç»™componentDidUpdate</li>
</ul>
<h3 id="static-getderivedstatefromerrorerror">static getDerivedStateFromError(error)</h3>
<ul>
<li>åœ¨&quot;render&quot;é˜¶æ®µæ•è·é”™è¯¯</li>
<li>åªèƒ½æ•è·å­ç»„ä»¶çš„é”™è¯¯</li>
</ul>
<h3 id="componentdidupdateprevprops-prevstate-snapshot">componentDidUpdate(prevProps, prevState, snapshot)</h3>
<ul>
<li>é¦–æ¬¡renderä¹‹åä¸ä¼šæ‰§è¡Œ</li>
<li>æ“ä½œdomçš„åˆé€‚æ—¶æœº</li>
<li>åœ¨è¿™é‡Œå¯ä»¥è®¾è®¡æ¡ä»¶æ¥é‡æ–°è¯·æ±‚æ¥å£</li>
<li>åœ¨è¿™é‡Œå¯ä»¥setStateï¼Œä½†æ˜¯è¦æ³¨æ„ä¸è¦é€ æˆæ— é™å¾ªç¯</li>
<li>getSnapshotBeforeUpdate()ä¼šä¸ºcomponentDidUpdateä¼ é€’snapshotå‚æ•°ï¼Œå¦åˆ™ä¸ºundefined</li>
</ul>
<h3 id="unsafe_componentwillreceivepropsnextprops-nextstate">UNSAFE_componentWillReceiveProps(nextProps, nextState)</h3>
<ul>
<li>ä¸å®‰å…¨çš„æ–¹æ³•ï¼Œæ¨èä½¿ç”¨æ–°Apiï¼šgetDerivedStateFromProps</li>
<li>ç›´æ¥ä½¿ç”¨componentWillReceivePropsä¼šæç¤ºWarning</li>
<li>åœ¨Reavt V17 componentWillReceivePropså°†ä¸èƒ½ä½¿ç”¨</li>
<li>å’ŒgetDerivedStateFromPropsæ–¹æ³•ä¸èƒ½åŒæ—¶å­˜åœ¨</li>
<li><strong>å’ŒgetDerivedStateFromPropsåŒºåˆ«1: ç»„ä»¶ç›´æ¥æ¸²æŸ“å’Œå­ç»„ä»¶ç›´æ¥æ¸²æŸ“ä¸ä¼šè¢«è°ƒç”¨</strong></li>
<li><strong>å’ŒgetDerivedStateFromPropsåŒºåˆ«1: æ— è¿”å›å€¼ï¼Œåè€…è¿”å›state</strong></li>
</ul>
<h3 id="getderivedstatefromprops">getDerivedStateFromProps()</h3>
<ul>
<li>è§¦å‘æ—¶æœºå¾ˆå¤šï¼š constructor()ä¹‹åã€æ¥æ”¶åˆ° &quot;new&quot; propsã€ setState()ä¹‹åã€ forceState()ä¹‹å</li>
<li>å®ƒå­˜åœ¨åªä¸ºäº†ä¸€ä¸ªç›®çš„ï¼Œæä¾›äº†ä»çˆ¶ç»„ä»¶propsçš„æ”¹å˜æ¥æ›´æ–°å­ç»„ä»¶å†…éƒ¨stateçš„åŠŸèƒ½ï¼ˆgetDerivedStateFromProps exists for only one purpose. It enables a component to update its internal state as the result of changes in props.ï¼‰</li>
<li>æ´¾ç”ŸçŠ¶æ€åº”è¯¥è°¨æ…ä½¿ç”¨ã€‚æˆ‘ä»¬çœ‹åˆ°çš„æ‰€æœ‰æ´¾ç”Ÿstateçš„é—®é¢˜æœ€ç»ˆéƒ½å¯ä»¥å½’ç»“ä¸º(1)æ— æ¡ä»¶åœ°ä»propsæ›´æ–°state  (2)æ¯å½“propså’Œstateä¸åŒ¹é…æ—¶æ›´æ–°state</li>
</ul>
<blockquote>
<p>For a long time, the lifecycle componentWillReceiveProps was the only way to update state in response to a change in props without an additional render. In version 16.3, we introduced a replacement lifecycle, getDerivedStateFromProps to solve the same use cases in a safer way.<br>
React 16.4 included a bugfix for getDerivedStateFromProps which caused some existing bugs in React components to reproduce more consistently.<br>
The getDerivedStateFromProps bugfix in 16.4 makes derived state more predictable.</p>
</blockquote>
<blockquote>
<p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯è§‚å¿µå°±æ˜¯getDerivedStateFromPropså’ŒgetDerivedStateFromPropsä»…åœ¨propsæ”¹å˜æ—¶è¢«è°ƒç”¨ï¼Œå®é™…ä¸Šåœ¨çˆ¶ç»„ä»¶é‡æ–°renderæ—¶å®ƒä»¬å°±ä¼šè¢«è°ƒç”¨ï¼Œè€Œä¸ç®¡ä¹‹å‰çš„å’Œç°åœ¨çš„propsæœ‰æ²¡æœ‰å·®å¼‚ã€‚ï¼ˆA common misconception is that getDerivedStateFromProps and componentWillReceiveProps are only called when props â€œchangeâ€. These lifecycles are called any time a parent component rerenders, regardless of whether the props are â€œdifferentâ€ from before.ï¼‰</p>
</blockquote>
<h2 id="ç–‘é—®åˆ—è¡¨">ç–‘é—®åˆ—è¡¨</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-6164166"><label class="task-list-item-label" for="task-item-6164166"> staticå‡½æ•°æ˜¯ä»€ä¹ˆ?</label></li>
</ul>
<blockquote>
<p>getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.</p>
</blockquote>
<ul>
<li>[ ]</li>
</ul>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">ä¸‹ä¸€ç¯‡</div>
                            <a href="https://angrychocobo.github.io//post/react-todo-xiang-mu">
                                <h3 class="post-title">
                                    React ToDoé¡¹ç›®
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E6%A6%82%E8%A7%88">æ¦‚è§ˆ</a>
<ul>
<li><a href="#mounting%E9%98%B6%E6%AE%B5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0">Mountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a></li>
<li><a href="#updating%E9%98%B6%E6%AE%B5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0">Updatingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a></li>
<li><a href="#unmounting%E9%98%B6%E6%AE%B5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0">Unmountingé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a></li>
<li><a href="#error-handling">Error Handling</a></li>
</ul>
</li>
<li><a href="#%E7%BB%86%E8%8A%82">ç»†èŠ‚</a>
<ul>
<li><a href="#constructorprops">constructor(props)</a></li>
<li><a href="#render">render()</a></li>
<li><a href="#%E5%9C%A8shouldcomponentupdatenextprops-nextstate">åœ¨shouldComponentUpdate(nextProps, nextState)</a></li>
<li><a href="#componentdidmount">componentDidMount()</a></li>
<li><a href="#getsnapshotbeforeupdateprevprops-prevstate">getSnapshotBeforeUpdate(prevProps, prevState)</a></li>
<li><a href="#static-getderivedstatefromerrorerror">static getDerivedStateFromError(error)</a></li>
<li><a href="#componentdidupdateprevprops-prevstate-snapshot">componentDidUpdate(prevProps, prevState, snapshot)</a></li>
<li><a href="#unsafe_componentwillreceivepropsnextprops-nextstate">UNSAFE_componentWillReceiveProps(nextProps, nextState)</a></li>
<li><a href="#getderivedstatefromprops">getDerivedStateFromProps()</a></li>
</ul>
</li>
<li><a href="#%E7%96%91%E9%97%AE%E5%88%97%E8%A1%A8">ç–‘é—®åˆ—è¡¨</a></li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
   | 
  <a class="rss" href="https://angrychocobo.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>